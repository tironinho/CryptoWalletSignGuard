<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SignGuard - Configura√ß√µes</title>
  <style>
    :root { --bg-dark: #0f172a; --bg-panel: #1e293b; --bg-hover: #334155; --text-main: #f8fafc; --text-muted: #94a3b8; --accent: #3b82f6; --accent-glow: rgba(59, 130, 246, 0.3); --danger: #ef4444; --border: rgba(148, 163, 184, 0.15); --radius: 12px; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: sans-serif; background: var(--bg-dark); color: var(--text-main); display: flex; min-height: 100vh; }
    .layout { display: flex; width: 100%; max-width: 1200px; margin: 0 auto; }
    .sidebar { width: 260px; padding: 30px 20px; border-right: 1px solid var(--border); display: flex; flex-direction: column; gap: 10px; }
    .brand { font-size: 1.25rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
    .nav-btn { background: transparent; border: none; color: var(--text-muted); padding: 12px 16px; text-align: left; font-size: 0.95rem; font-weight: 500; border-radius: var(--radius); cursor: pointer; transition: all 0.2s; }
    .nav-btn:hover { background: var(--bg-hover); color: var(--text-main); }
    .nav-btn.active { background: rgba(59, 130, 246, 0.15); color: var(--accent); font-weight: 600; }
    .content { flex: 1; padding: 40px; overflow-y: auto; }
    .panel-title { font-size: 1.5rem; font-weight: 700; margin: 0 0 10px 0; }
    .panel-desc { color: var(--text-muted); margin-bottom: 30px; font-size: 0.95rem; }
    .card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; margin-bottom: 20px; }
    .setting-row { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid var(--border); }
    .setting-row:last-child { border-bottom: none; }
    textarea, input[type="text"] { width: 100%; background: #020617; border: 1px solid var(--border); color: var(--text-main); padding: 12px; border-radius: 8px; margin-top: 10px; }
    .sg-btn { background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; }
    .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #334155; transition: .3s; border-radius: 24px; }
    .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .3s; border-radius: 50%; }
    input:checked + .slider { background-color: var(--accent); }
    input:checked + .slider:before { transform: translateX(20px); }
    .hidden { display: none !important; }
    section.tab-panel { display: none; }
    section.tab-panel.active { display: block; }
    .list-stat { background: rgba(15,23,42,0.6); border-radius: 8px; padding: 12px; text-align: center; }
    .list-stat-n { display: block; font-size: 1.5rem; font-weight: 700; color: var(--accent); }
    .list-stat-l { font-size: 0.8rem; color: var(--text-muted); }
    .list-badge { display: inline-block; padding: 2px 8px; border-radius: 6px; font-size: 0.75rem; margin-left: 6px; }
    .list-badge-user { background: rgba(59,130,246,0.2); color: #93c5fd; }
    .list-badge-feed { background: rgba(148,163,184,0.2); color: #94a3b8; }
  </style>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="brand">üõ°Ô∏è SignGuard</div>
      <button class="nav-btn tab-btn active" data-tab="settings" type="button">‚öôÔ∏è Geral</button>
      <button class="nav-btn tab-btn" data-tab="security" type="button">üîí Seguran√ßa</button>
      <button class="nav-btn tab-btn" data-tab="lists" type="button">üìã Listas</button>
      <button class="nav-btn tab-btn" data-tab="history" type="button">üìú Hist√≥rico</button>
      <button class="nav-btn tab-btn" data-tab="diagnostics" type="button" id="tabDiagnostics">üîß Diagn√≥stico</button>
    </aside>
    <main class="content">
      <section id="tab-settings" class="tab-panel active">
        <h1 class="panel-title">Configura√ß√µes Gerais</h1>
        <p class="panel-desc" style="margin-bottom:16px;">O SignGuard exibe confirma√ß√£o como overlay na p√°gina. O Chrome n√£o permite abrir automaticamente o popup da toolbar durante uma transa√ß√£o.</p>
        <div class="card">
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Exibir valores em USD</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Requer permiss√µes de pre√ßos (Conceder em Seguran√ßa ‚Üí Privacidade). Converte valores nativos para USD.</p></div>
            <label class="switch"><input type="checkbox" id="showUsd"><span class="slider"></span></label>
          </div>
          <p id="showUsdError" style="display:none;color:var(--danger);font-size:0.85rem;margin:4px 0 0 0;"></p>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Expandir detalhes por padr√£o</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Abrir se√ß√µes detalhadas (custos, simula√ß√£o, decoded) abertas ao exibir o overlay.</p></div>
            <label class="switch"><input type="checkbox" id="defaultExpandDetails"><span class="slider"></span></label>
          </div>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Intel de Endere√ßos</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Mostrar etiquetas em contratos conhecidos.</p></div>
            <label class="switch"><input type="checkbox" id="addressIntel"><span class="slider"></span></label>
          </div>
        </div>
      </section>
      <section id="tab-security" class="tab-panel hidden">
        <h1 class="panel-title">Seguran√ßa Avan√ßada</h1>
        <div class="card">
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Fail Mode (falha de an√°lise)</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">fail_open: permitir com confirma√ß√£o; fail_closed: bloquear por padr√£o.</p></div>
            <select id="failMode" style="background:#1e293b;color:#f8fafc;border:1px solid var(--border);padding:8px 12px;border-radius:8px;">
              <option value="fail_open">fail_open (permite com confirma√ß√£o)</option>
              <option value="fail_closed">fail_closed (bloqueia por padr√£o)</option>
            </select>
          </div>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">üõ°Ô∏è Modo Fortaleza</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Bloqueia aprova√ß√µes em sites desconhecidos.</p></div>
            <label class="switch"><input type="checkbox" id="fortressMode"><span class="slider"></span></label>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">Spenders (Allow/Deny)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Spender = contrato que recebe aprova√ß√£o/permiss√£o (approve, permit2, setApprovalForAll). Um endere√ßo por linha (com ou sem 0x).</p>
          <p style="font-size:0.85rem;margin:0 0 4px 0;">Allowlist Spenders:</p>
          <textarea id="allowlistSpenders" rows="3" placeholder="0x... ou 40 hex" style="font-family:monospace;font-size:12px;"></textarea>
          <p style="font-size:0.85rem;margin:8px 0 4px 0;">Denylist Spenders:</p>
          <textarea id="denylistSpenders" rows="3" placeholder="0x... ou 40 hex" style="font-family:monospace;font-size:12px;"></textarea>
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
            <button id="normalizeSpenders" class="sg-btn" type="button" style="background:#334155;">Normalizar</button>
            <button id="applySpenders" class="sg-btn" type="button">Aplicar</button>
            <button id="revertSpenders" class="sg-btn" type="button" style="background:#334155;">Reverter</button>
            <button id="clearSpenders" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
          </div>
          <p id="spendersError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card" id="vault">
          <h3 style="margin:0 0 6px 0;">Vault (Cofre)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Vault bloqueia intera√ß√µes com contratos listados at√© desbloqueio tempor√°rio (5 min / 30 min no overlay).</p>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Ativar Vault</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Contratos bloqueados sem desbloqueio expl√≠cito.</p></div>
            <label class="switch"><input type="checkbox" id="vaultEnabled"><span class="slider"></span></label>
          </div>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Bloquear tamb√©m Approvals/Permits</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Quando spender est√° na lista.</p></div>
            <label class="switch"><input type="checkbox" id="vaultBlockApprovals"><span class="slider"></span></label>
          </div>
          <p style="font-size:0.85rem;margin:0 0 4px 0;">Locked Contracts (um 0x... por linha):</p>
          <textarea id="vaultLockedContracts" rows="4" placeholder="0x..." style="font-family:monospace;font-size:12px;"></textarea>
          <p id="vaultStatus" style="font-size:0.85rem;color:var(--text-muted);margin:6px 0 0 0;">‚Äî</p>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="applyVault" class="sg-btn" type="button">Aplicar</button>
            <button id="revertVault" class="sg-btn" type="button" style="background:#334155;">Reverter</button>
            <button id="clearVault" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
            <button id="vaultUnlockNow" class="sg-btn" type="button" style="background:#f59e0b;color:black;">Desbloquear agora (5 min)</button>
          </div>
          <p id="vaultError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">Simulation (Tenderly)</h3>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Habilitar simula√ß√£o</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Simular transa√ß√µes antes de enviar.</p></div>
            <label class="switch"><input type="checkbox" id="simulationEnabled"><span class="slider"></span></label>
          </div>
          <p style="font-size:0.85rem;margin:0 0 4px 0;">Account:</p>
          <input type="text" id="tenderlyAccount" placeholder="tenderly-account" style="margin-bottom:8px;" />
          <p style="font-size:0.85rem;margin:0 0 4px 0;">Project:</p>
          <input type="text" id="tenderlyProject" placeholder="project-slug" style="margin-bottom:8px;" />
          <p style="font-size:0.85rem;margin:0 0 4px 0;">Access Key (password):</p>
          <input type="password" id="tenderlyKey" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="margin-bottom:8px;" />
          <p style="color:var(--text-muted);font-size:0.8rem;margin:0 0 8px 0;">Chaves ficam localmente no chrome.storage.sync; n√£o s√£o hardcoded.</p>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="applySimulation" class="sg-btn" type="button">Aplicar</button>
            <button id="testSimulation" class="sg-btn" type="button" style="background:#334155;">Testar simula√ß√£o</button>
          </div>
          <p id="simulationError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">Privacidade</h3>
          <p style="color:var(--text-muted);font-size:0.9rem;margin:0 0 8px 0;">Tudo desligado por padr√£o. Telemetria e Cloud Intel s√£o independentes: ativar Cloud Intel n√£o envia telemetria.</p>
          <p style="margin:0 0 12px 0; font-size:0.85rem;"><a href="privacy.html" target="_blank" rel="noopener" style="color:var(--accent);">Privacidade</a> ¬∑ <a href="terms.html" target="_blank" rel="noopener" style="color:var(--accent);">Termos de uso</a></p>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Aceito os termos de uso</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Obrigat√≥rio apenas se quiser ativar telemetria ou Cloud Intel. Pode desmarcar depois em qualquer momento.</p></div>
            <label class="switch"><input type="checkbox" id="termsAccepted"><span class="slider"></span></label>
          </div>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Permitir telemetria an√¥nima</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Quando ligado e termos aceitos: envia apenas eventos m√≠nimos (ex.: risco de p√°gina, decis√£o permitir/bloquear). N√£o envia URLs visitadas, seeds nem dados da carteira. Para desligar: desmarque aqui.</p></div>
            <label class="switch"><input type="checkbox" id="telemetryOptIn"><span class="slider"></span></label>
          </div>
          <div class="setting-row">
            <div><h3 style="margin:0 0 4px 0;">Permitir Cloud Intel</h3><p style="color:#94a3b8;margin:0;font-size:0.9rem;">Baixa listas/feeds de amea√ßa (GitHub, APIs de reputa√ß√£o). N√£o envia seed nem transa√ß√£o bruta. N√£o ativa telemetria.</p></div>
            <label class="switch"><input type="checkbox" id="cloudIntelOptIn"><span class="slider"></span></label>
          </div>
          <div class="card" style="margin-top:12px; padding:14px; background:rgba(2,6,23,0.5);">
            <h4 style="margin:0 0 8px 0; font-size:0.9rem;">Permiss√µes por recurso</h4>
            <p style="margin:0 0 10px 0; font-size:0.8rem; color:var(--text-muted);">Sem permiss√µes concedidas, o recurso permanece desligado e n√£o faz chamadas de rede.</p>
            <p style="margin:0 0 6px 0; font-size:0.85rem;">Cloud Intel: <span id="cloudPermStatus">‚Äî</span> <button type="button" id="cloudPermGrantBtn" class="sg-btn" style="background:var(--accent);font-size:0.8rem;padding:6px 12px;">Conceder</button> <button type="button" id="cloudPermRevokeBtn" class="sg-btn" style="background:#334155;font-size:0.8rem;padding:6px 12px;">Revogar</button></p>
            <p style="margin:0 0 6px 0; font-size:0.85rem;">Pre√ßos (USD): <span id="pricingPermStatus">‚Äî</span> <button type="button" id="pricingPermGrantBtn" class="sg-btn" style="background:var(--accent);font-size:0.8rem;padding:6px 12px;">Conceder</button> <button type="button" id="pricingPermRevokeBtn" class="sg-btn" style="background:#334155;font-size:0.8rem;padding:6px 12px;">Revogar</button> (toggle ¬´Exibir valores em USD¬ª em Geral)</p>
            <p style="margin:0 0 6px 0; font-size:0.85rem;">Simula√ß√£o (Tenderly): <span id="simPermStatus">‚Äî</span> <button type="button" id="simPermGrantBtn" class="sg-btn" style="background:var(--accent);font-size:0.8rem;padding:6px 12px;">Conceder</button> <button type="button" id="simPermRevokeBtn" class="sg-btn" style="background:#334155;font-size:0.8rem;padding:6px 12px;">Revogar</button></p>
            <p style="margin:0 0 0 0; font-size:0.85rem;">Telemetria: <span id="telemetryPermStatus">‚Äî</span> <button type="button" id="telemetryPermGrantBtn" class="sg-btn" style="background:var(--accent);font-size:0.8rem;padding:6px 12px;">Conceder</button> <button type="button" id="telemetryPermRevokeBtn" class="sg-btn" style="background:#334155;font-size:0.8rem;padding:6px 12px;">Revogar</button></p>
          </div>
          <p id="cloudIntelError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
          <p id="telemetryPermError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">Dom√≠nios permitidos (Fortress)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Em fortressMode, apenas estes dom√≠nios podem disparar overlay/permitir fluxo. Um host por linha.</p>
          <textarea id="whitelistedDomains" rows="4" placeholder="app.uniswap.org"></textarea>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="applyWhitelistedDomains" class="sg-btn" type="button">Aplicar</button>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 8px 0;">Lista de Confian√ßa (Whitelist)</h3>
          <textarea id="whitelistInput" rows="5" placeholder="ex: app.uniswap.org"></textarea>
          <div style="margin-top:10px; text-align:right;"><button id="saveWhitelist" class="sg-btn" type="button">Salvar</button></div>
        </div>
      </section>
      <section id="tab-lists" class="tab-panel hidden">
        <h1 class="panel-title">Listas (Whitelist / Blacklist)</h1>
        <p class="panel-desc">Dom√≠nios confi√°veis/bloqueados, endere√ßos bloqueados e tokens scam. Feeds atualizam automaticamente; aqui voc√™ define seus overrides.</p>
        <div class="card">
          <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;margin-bottom:16px;">
            <div>
              <span id="listsLastUpdated" style="color:var(--text-muted);font-size:0.9rem;">Atualizado em: ‚Äî</span>
              <div id="listsSources" style="margin-top:6px;font-size:0.85rem;color:var(--text-muted);">‚Äî</div>
            </div>
            <button id="listsRefreshNow" class="sg-btn" type="button">Atualizar feeds</button>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">A) Dom√≠nios confi√°veis (Whitelist)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Um dom√≠nio por linha</p>
          <textarea id="listsTrustedDomains" rows="6" placeholder="app.uniswap.org&#10;opensea.io" style="font-family:monospace;font-size:13px;"></textarea>
          <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:8px;">
            <button id="listsApplyTrusted" class="sg-btn" type="button">Aplicar</button>
            <button id="listsRevertTrusted" class="sg-btn" type="button" style="background:#334155;">Reverter</button>
            <button id="listsClearTrusted" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
            <span id="listsTrustedCount" style="font-size:0.9rem;color:var(--text-muted);">Itens (override): 0 ¬∑ Total efetivo: 0</span>
          </div>
          <p id="listsTrustedError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">B) Dom√≠nios bloqueados (Blacklist)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Um dom√≠nio por linha</p>
          <textarea id="listsBlockedDomains" rows="6" style="font-family:monospace;font-size:13px;"></textarea>
          <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:8px;">
            <button id="listsApplyBlockedDomains" class="sg-btn" type="button">Aplicar</button>
            <button id="listsRevertBlockedDomains" class="sg-btn" type="button" style="background:#334155;">Reverter</button>
            <button id="listsClearBlockedDomains" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
            <span id="listsBlockedDomainsCount" style="font-size:0.9rem;color:var(--text-muted);">Itens (override): 0 ¬∑ Total efetivo: 0</span>
          </div>
          <p id="listsBlockedDomainsError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">C) Endere√ßos bloqueados (Blacklist)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Um endere√ßo 0x... por linha</p>
          <textarea id="listsBlockedAddresses" rows="6" style="font-family:monospace;font-size:13px;"></textarea>
          <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:8px;">
            <button id="listsApplyBlockedAddresses" class="sg-btn" type="button">Aplicar</button>
            <button id="listsRevertBlockedAddresses" class="sg-btn" type="button" style="background:#334155;">Reverter</button>
            <button id="listsClearBlockedAddresses" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
            <span id="listsBlockedAddressesCount" style="font-size:0.9rem;color:var(--text-muted);">Itens (override): 0 ¬∑ Total efetivo: 0</span>
          </div>
          <p id="listsBlockedAddressesError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px 0;">D) Tokens scam (Blacklist)</h3>
          <p style="color:var(--text-muted);font-size:0.85rem;margin:0 0 8px 0;">Formato: chainIdHex:0xAddress ou chainId,0xAddress</p>
          <textarea id="listsScamTokens" rows="6" placeholder="0x1:0xTokenAddress" style="font-family:monospace;font-size:13px;"></textarea>
          <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:8px;">
            <button id="listsApplyScamTokens" class="sg-btn" type="button">Aplicar</button>
            <button id="listsRevertScamTokens" class="sg-btn" type="button" style="background:#334155;">Reverter</button>
            <button id="listsClearScamTokens" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
            <span id="listsScamTokensCount" style="font-size:0.9rem;color:var(--text-muted);">Itens (override): 0 ¬∑ Total efetivo: 0</span>
          </div>
          <p id="listsScamTokensError" style="margin:6px 0 0 0;font-size:0.85rem;color:var(--danger);display:none;"></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 10px 0;">Importar / Exportar</h3>
          <p style="color:var(--text-muted);font-size:0.9rem;margin:0 0 10px 0;">Export/Import afeta apenas overrides.</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button id="listsExport" class="sg-btn" type="button" style="background:#334155;">Exportar JSON</button>
            <label class="sg-btn" style="background:#334155;cursor:pointer;display:inline-block;"><input type="file" id="listsImportFile" accept=".json" style="display:none;">Importar JSON</label>
          </div>
          <p id="listsImportStatus" style="margin:10px 0 0 0;font-size:0.9rem;color:var(--text-muted);"></p>
        </div>
      </section>
      <section id="tab-diagnostics" class="tab-panel hidden">
        <h1 class="panel-title">Diagn√≥stico</h1>
        <p class="panel-desc">Vers√£o, listas e marcadores de inje√ß√£o (√∫til com debugLogs ativo).</p>
        <div class="card">
          <h3 style="margin:0 0 10px 0;">Marcadores no dApp</h3>
          <p style="color:var(--text-muted);font-size:0.9rem;margin:0 0 10px 0;">Em uma aba com um dApp (ex: OpenSea), abra o DevTools (F12) e no console execute:</p>
          <pre style="background:#0f172a;padding:12px;border-radius:8px;font-size:12px;overflow:auto;">document.documentElement.dataset.sgContent
document.documentElement.dataset.sgMainworld</pre>
          <p style="color:var(--text-muted);font-size:0.9rem;margin:8px 0 0 0;">Se content e mainWorld estiverem injetados, ver√° <code>"1"</code>. Caso contr√°rio <code>undefined</code>.</p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 10px 0;">Extens√£o</h3>
          <p style="margin:0;"><b>Vers√£o:</b> <span id="diagnosticsVersion">‚Äî</span></p>
          <div class="setting-row" style="margin-top:12px;">
            <div><span>Logs de debug (console)</span><p style="color:var(--text-muted);margin:0;font-size:0.85rem;">Ativa [SignGuard] no console do content e mostra bot√£o Diagn√≥stico no popup.</p></div>
            <label class="switch"><input type="checkbox" id="diagnosticsDebugLogs"><span class="slider"></span></label>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 10px 0;">Listas</h3>
          <p style="margin:0 0 8px 0;"><b>√öltima atualiza√ß√£o:</b> <span id="diagnosticsLastRefresh">‚Äî</span></p>
          <p style="margin:0;"><b>Contagens:</b> <span id="diagnosticsCounts">‚Äî</span></p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 10px 0;">Exportar diagn√≥stico</h3>
          <p style="color:var(--text-muted);font-size:0.9rem;margin:0 0 10px 0;">Gera um JSON com eventos recentes e configura√ß√µes (sem segredos) para suporte.</p>
          <button type="button" id="diagnosticsExportBtn" class="sg-btn" style="background:var(--accent);">Exportar diagn√≥stico (JSON)</button>
          <p id="diagnosticsExportStatus" style="margin:8px 0 0 0;font-size:0.85rem;color:var(--text-muted);"></p>
        </div>
      </section>
      <section id="tab-history" class="tab-panel hidden">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <h1 class="panel-title" style="margin:0;">Hist√≥rico</h1>
          <div style="display:flex; gap:8px;">
            <button id="historyExport" class="sg-btn" type="button" style="background:#334155;">Exportar</button>
            <button id="clearHistory" class="sg-btn" type="button" style="background:#334155;">Limpar</button>
          </div>
        </div>
        <div class="card"><div id="historyList">Carregando...</div></div>
      </section>
    </main>
  </div>
  <script type="module" src="options.js"></script>
</body>
</html>
