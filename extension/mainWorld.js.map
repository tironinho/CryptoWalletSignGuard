{
  "version": 3,
  "sources": ["../src/feeEstimate.ts", "../src/walletDetect.ts", "../src/mainWorld.ts"],
  "sourcesContent": ["export type FeeEstimate = {\r\n  ok: boolean;\r\n  gasLimit?: bigint;\r\n  maxFeePerGas?: bigint;        // wei\r\n  maxPriorityFeePerGas?: bigint;// wei\r\n  gasPrice?: bigint;            // wei (legacy)\r\n  feeMaxWei?: bigint;           // wei\r\n  feeLikelyWei?: bigint;        // wei (baseFee + priority) * gas\r\n  reason?: string;\r\n};\r\n\r\nconst RPC_TIMEOUT_MS = 2500;\r\n\r\n/** Call RPC once; returns null on any error or timeout. Never throws, no console.error. */\r\nasync function tryRpc<T>(providerRequest: (a: any) => Promise<any>, method: string, params: any[], timeoutMs = RPC_TIMEOUT_MS): Promise<T | null> {\r\n  let t: ReturnType<typeof setTimeout>;\r\n  const timeout = new Promise<null>((res) => { t = setTimeout(() => res(null), timeoutMs); });\r\n  try {\r\n    const r = await Promise.race([providerRequest({ method, params }).then((x) => x as T), timeout]);\r\n    clearTimeout(t!);\r\n    return r;\r\n  } catch {\r\n    clearTimeout(t!);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function estimateFee(providerRequest: (args: any) => Promise<any>, tx: any): Promise<FeeEstimate> {\r\n  try {\r\n    // 1) gasLimit (estimateGas) - fallback for simple transfers\r\n    let gasLimit: bigint;\r\n    const gasHex = await tryRpc<string>(providerRequest, \"eth_estimateGas\", [tx]);\r\n    if (gasHex != null && typeof gasHex === \"string\") {\r\n      try { gasLimit = BigInt(gasHex); } catch { gasLimit = 150000n; }\r\n    } else {\r\n      const hasData = tx?.data && String(tx.data) !== \"0x\" && String(tx.data).toLowerCase() !== \"0x\";\r\n      const valueWei = BigInt(tx?.value || \"0x0\");\r\n      gasLimit = hasData ? 150000n : valueWei > 0n ? 21000n : 150000n;\r\n    }\r\n\r\n    // 2) Prefer dapp-provided EIP-1559 fields if present\r\n    const maxFeePerGas = tx?.maxFeePerGas ? BigInt(tx.maxFeePerGas) : undefined;\r\n    const maxPriorityFeePerGas = tx?.maxPriorityFeePerGas ? BigInt(tx.maxPriorityFeePerGas) : undefined;\r\n    const gasPrice = tx?.gasPrice ? BigInt(tx.gasPrice) : undefined;\r\n\r\n    // 3) If no fees provided, compute from feeHistory + priority (or gasPrice fallback)\r\n    let computedMaxFee: bigint | undefined = maxFeePerGas;\r\n    let computedPriority: bigint | undefined = maxPriorityFeePerGas;\r\n\r\n    if (!computedMaxFee && !gasPrice) {\r\n      const prioHex = await tryRpc<string>(providerRequest, \"eth_maxPriorityFeePerGas\", []);\r\n      computedPriority = prioHex != null && prioHex !== \"\" ? BigInt(prioHex) : 1_000_000_000n;\r\n\r\n      let baseFee: bigint | undefined;\r\n      const fh = await tryRpc<{ baseFeePerGas?: string[] }>(providerRequest, \"eth_feeHistory\", [\"0x1\", \"latest\", []]);\r\n      const arr = fh?.baseFeePerGas;\r\n      if (Array.isArray(arr) && arr.length > 0) {\r\n        try { baseFee = BigInt(arr[arr.length - 1]); } catch { baseFee = undefined; }\r\n      } else {\r\n        baseFee = undefined;\r\n      }\r\n\r\n      if (baseFee != null) {\r\n        computedMaxFee = baseFee * 2n + (computedPriority ?? 0n);\r\n      } else {\r\n        const gpHex = await tryRpc<string>(providerRequest, \"eth_gasPrice\", []);\r\n        if (gpHex != null && gpHex !== \"\") return finalizeLegacy(gasLimit, BigInt(gpHex));\r\n        return { ok: false, reason: \"fee_unknown_wallet_will_estimate\" };\r\n      }\r\n    }\r\n\r\n    if (gasPrice) return finalizeLegacy(gasLimit, gasPrice);\r\n\r\n    if (!computedMaxFee) {\r\n      return { ok: false, reason: \"fee_unknown_wallet_will_estimate\" };\r\n    }\r\n\r\n    const maxP = computedMaxFee;\r\n    const prio = computedPriority ?? 0n;\r\n    const likelyPerGas = (maxP + prio) / 2n;\r\n\r\n    const feeMaxWei = gasLimit * maxP;\r\n    const feeLikelyWei = gasLimit * likelyPerGas;\r\n\r\n    return {\r\n      ok: true,\r\n      gasLimit,\r\n      maxFeePerGas: maxP,\r\n      maxPriorityFeePerGas: prio,\r\n      feeMaxWei,\r\n      feeLikelyWei\r\n    };\r\n  } catch {\r\n    return { ok: false, reason: \"fee_unknown_wallet_will_estimate\" };\r\n  }\r\n}\r\n\r\nfunction finalizeLegacy(gasLimit: bigint, gasPrice: bigint): FeeEstimate {\r\n  const feeMaxWei = gasLimit * gasPrice;\r\n  return { ok: true, gasLimit, gasPrice, feeMaxWei, feeLikelyWei: feeMaxWei };\r\n}\r\n", "import type { WalletBrand as SharedWalletBrand, WalletName } from \"./shared/types\";\r\n\r\nexport type WalletId =\r\n  | \"metamask\"\r\n  | \"coinbase\"\r\n  | \"trust\"\r\n  | \"okx\"\r\n  | \"binance\"\r\n  | \"rabby\"\r\n  | \"rainbow\"\r\n  | \"phantom\"\r\n  | \"brave\"\r\n  | \"bitget\"\r\n  | \"safepal\"\r\n  | \"frame\"\r\n  | \"unknown\";\r\n\r\nexport type WalletBrand = SharedWalletBrand;\r\n\r\nexport type WalletMeta = { id: WalletId; name: string; iconHint?: string };\r\n\r\n/** Returns display brand string for overlay. Prefers EIP-6963 info when available. Fallback: \"EVM Wallet\". */\r\nexport function detectWalletBrand(eth: any, eip6963Name?: string): WalletBrand {\r\n  try {\r\n    if (eip6963Name && typeof eip6963Name === \"string\" && eip6963Name.trim()) return eip6963Name.trim() as WalletBrand;\r\n    if (!eth) return \"EVM Wallet\";\r\n    if (eth?.isMetaMask === true) return \"MetaMask\";\r\n    if (eth?.isCoinbaseWallet === true || (eth as any)?.providerMap?.coinbase) return \"Coinbase Wallet\";\r\n    if (eth?.isRabby === true) return \"Rabby\";\r\n    if (eth?.isTrust === true || eth?.isTrustWallet === true) return \"Trust Wallet\";\r\n    if (eth?.isOkxWallet === true || eth?.isOKExWallet === true) return \"OKX Wallet\";\r\n    if (eth?.isBinance === true || eth?.isBinanceWallet === true) return \"Binance Web3\";\r\n    if (eth?.isPhantom === true) return \"Phantom EVM\";\r\n    if (eth?.isBraveWallet === true) return \"Brave Wallet\";\r\n    if (eth?.isBitget === true || eth?.isBitKeep === true) return \"Bitget Wallet\";\r\n    if (eth?.isRainbow === true || eth?.isFrame === true || eth?.isSafePal === true || (eth as any)?.isTaho === true || (eth as any)?.isLedger === true) return \"EVM Wallet\";\r\n    return \"EVM Wallet\";\r\n  } catch {\r\n    return \"EVM Wallet\";\r\n  }\r\n}\r\n\r\n/** Detection order: first match wins. Compatible with multi-provider and EIP-6963. */\r\nexport function detectWalletFromProvider(p: any): WalletMeta {\r\n  try {\r\n    if (!p) return { id: \"unknown\", name: \"Unknown\" };\r\n\r\n    if (p?.isMetaMask === true) return { id: \"metamask\", name: \"MetaMask\" };\r\n    if (p?.isCoinbaseWallet === true || (p as any)?.providerMap?.coinbase) return { id: \"coinbase\", name: \"Coinbase Wallet\" };\r\n    if (p?.isTrust === true || p?.isTrustWallet === true) return { id: \"trust\", name: \"Trust Wallet\" };\r\n    if (p?.isOkxWallet === true || p?.isOKExWallet === true) return { id: \"okx\", name: \"OKX Wallet\" };\r\n    if (p?.isBinance === true || p?.isBinanceWallet === true) return { id: \"binance\", name: \"Binance Web3 Wallet\" };\r\n    if (p?.isRabby === true) return { id: \"rabby\", name: \"Rabby\" };\r\n    if (p?.isRainbow === true) return { id: \"rainbow\", name: \"Rainbow\" };\r\n    if (p?.isPhantom === true) return { id: \"phantom\", name: \"Phantom\" };\r\n    if (p?.isBraveWallet === true) return { id: \"brave\", name: \"Brave Wallet\" };\r\n    if (p?.isBitget === true || p?.isBitKeep === true) return { id: \"bitget\", name: \"Bitget Wallet\" };\r\n    if (p?.isSafePal === true) return { id: \"safepal\", name: \"SafePal\" };\r\n    if (p?.isFrame === true) return { id: \"frame\", name: \"Frame\" };\r\n    if ((p as any)?.isTaho === true) return { id: \"unknown\", name: \"Taho\" };\r\n    if ((p as any)?.isLedger === true) return { id: \"unknown\", name: \"Ledger\" };\r\n\r\n    return { id: \"unknown\", name: \"EIP-1193 Wallet\" };\r\n  } catch {\r\n    return { id: \"unknown\", name: \"Unknown\" };\r\n  }\r\n}\r\n\r\nimport type { WalletInfo, WalletKind } from \"./shared/types\";\r\n\r\nconst ID_TO_NAME: Record<WalletId, WalletName> = {\r\n  metamask: \"MetaMask\",\r\n  coinbase: \"Coinbase Wallet\",\r\n  trust: \"Trust Wallet\",\r\n  okx: \"OKX Wallet\",\r\n  binance: \"Binance Web3\",\r\n  rabby: \"Rabby\",\r\n  rainbow: \"EVM Wallet\",\r\n  phantom: \"Phantom EVM\",\r\n  brave: \"Brave Wallet\",\r\n  bitget: \"Bitget Wallet\",\r\n  safepal: \"EVM Wallet\",\r\n  frame: \"EVM Wallet\",\r\n  unknown: \"EVM Wallet\",\r\n};\r\n\r\nexport function detectEvmWallet(provider: any, eip6963Name?: string): WalletInfo {\r\n  const meta = detectWalletFromProvider(provider);\r\n  const displayName = eip6963Name && eip6963Name.trim() ? eip6963Name.trim() : (ID_TO_NAME[meta.id] || meta.name || \"EVM Wallet\");\r\n  return {\r\n    kind: \"EVM_INJECTED\",\r\n    name: displayName as WalletName,\r\n    walletBrand: detectWalletBrand(provider, eip6963Name),\r\n    walletName: displayName,\r\n    flags: { [meta.id]: true },\r\n  };\r\n}\r\n\r\nexport function detectSolWallet(sol: any): WalletInfo {\r\n  try {\r\n    if (!sol) return { kind: \"SOLANA_INJECTED\", name: \"Unknown\", flags: {} };\r\n    if (sol?.isPhantom) return { kind: \"SOLANA_INJECTED\", name: \"Phantom\", flags: { isPhantom: true } };\r\n    if (sol?.isSolflare) return { kind: \"SOLANA_INJECTED\", name: \"Solflare\", flags: { isSolflare: true } };\r\n    if (sol?.isBackpack) return { kind: \"SOLANA_INJECTED\", name: \"Backpack\", flags: { isBackpack: true } };\r\n    return { kind: \"SOLANA_INJECTED\", name: \"Injected\", flags: {} };\r\n  } catch {\r\n    return { kind: \"SOLANA_INJECTED\", name: \"Unknown\", flags: {} };\r\n  }\r\n}\r\n\r\nexport function listEvmProviders(): any[] {\r\n  try {\r\n    const eth = (typeof window !== \"undefined\" ? (window as any)?.ethereum : null) as any;\r\n    const arr: any[] = [];\r\n    if (eth) arr.push(eth);\r\n    if (eth?.providers && Array.isArray(eth.providers)) {\r\n      for (const p of eth.providers) {\r\n        if (p && !arr.includes(p)) arr.push(p);\r\n      }\r\n    }\r\n    return Array.from(new Set(arr));\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n", "// Runs in the MAIN world (MV3 content script with content_scripts[].world = \"MAIN\").\r\n(window as any).__signguard_mainworld = true;\r\ntry {\r\n  document.documentElement.setAttribute(\"data-signguard-mainworld\", \"1\");\r\n} catch {}\r\n// Implements a correct \"defer + resume\" pipeline:\r\nimport { estimateFee } from \"./feeEstimate\";\r\nimport { detectEvmWallet, detectSolWallet, detectWalletFromProvider, detectWalletBrand, listEvmProviders } from \"./walletDetect\";\r\n// - intercept sensitive provider.request calls and DEFER (no wallet popup yet)\r\n// - Content script shows overlay and posts decision\r\n// - MAIN world RESUMES by reexecuting the ORIGINAL request with bypass (no recursion)\r\n\r\nconst TIMEOUT_MS_UI = 600_000;   // 10 min when UI shown; keepalive resets\r\nconst TIMEOUT_MS_FAILOPEN = 60_000; // 60s when no UI yet (fail-open on next user gesture)\r\nconst KEEPALIVE_CAP_MS = 900_000; // 15 min max lifetime from creation when UI shown\r\n\r\ntype PendingReq = {\r\n  resolve: (v: any) => void;\r\n  reject: (e: any) => void;\r\n  runOriginal: () => Promise<any>;\r\n  createdAt: number;\r\n  lastKeepaliveAt?: number;\r\n  method: string;\r\n  uiShown?: boolean;\r\n};\r\n\r\nconst pendingCalls = new Map<string, PendingReq>();\r\n\r\ntype FailOpenItem = {\r\n  id: string;\r\n  runOriginal: () => Promise<any>;\r\n  resolve: (v: any) => void;\r\n  reject: (e: any) => void;\r\n  armedAt: number;\r\n};\r\nconst failOpenQueue: FailOpenItem[] = [];\r\nlet failOpenArmed = false;\r\n\r\nfunction armFailOpenOnNextGesture(item: FailOpenItem) {\r\n  failOpenQueue.push(item);\r\n  if (failOpenArmed) return;\r\n  failOpenArmed = true;\r\n\r\n  const handler = () => {\r\n    window.removeEventListener(\"pointerdown\", handler, true);\r\n    failOpenArmed = false;\r\n\r\n    const next = failOpenQueue.shift();\r\n    if (!next) return;\r\n\r\n    try {\r\n      next.runOriginal().then(next.resolve).catch(next.reject);\r\n    } catch (e) {\r\n      next.reject(e);\r\n    }\r\n\r\n    if (failOpenQueue.length > 0) {\r\n      const nextItem = failOpenQueue.shift()!;\r\n      armFailOpenOnNextGesture(nextItem);\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"pointerdown\", handler, true);\r\n}\r\n\r\nconst SG_BYPASS = Symbol.for(\"SG_BYPASS\"); // evita recurs\u00E3o\r\n\r\nfunction sgId() {\r\n  return (crypto?.randomUUID?.() || (Date.now() + \"-\" + Math.random().toString(16).slice(2)));\r\n}\r\n\r\nfunction toBigIntHex(v: any): bigint {\r\n  try {\r\n    const s = String(v || \"0x0\");\r\n    if (!s.startsWith(\"0x\")) return BigInt(s); // allow decimal strings too\r\n    return BigInt(s);\r\n  } catch {\r\n    return 0n;\r\n  }\r\n}\r\n\r\nfunction weiToEthDecimal18(wei: bigint): string {\r\n  const ONE = 10n ** 18n;\r\n  const whole = wei / ONE;\r\n  const frac = wei % ONE;\r\n  const fracStr = frac.toString().padStart(18, \"0\");\r\n  const trimmed = fracStr.replace(/0+$/, \"\");\r\n  return trimmed ? `${whole.toString()}.${trimmed}` : whole.toString();\r\n}\r\n\r\nfunction postMessageSG(type: string, data: any) {\r\n  try {\r\n    window.postMessage(\r\n      { __SIGNGUARD__: true, type, data, href: location.href, origin: location.origin, ts: Date.now() },\r\n      \"*\"\r\n    );\r\n  } catch {}\r\n}\r\n\r\nfunction buildRpcMeta(methodLower: string, params: any, provider: any) {\r\n  try {\r\n    if (methodLower === \"eth_sendtransaction\" || methodLower === \"wallet_sendtransaction\") {\r\n      const tx = Array.isArray(params) ? params[0] : undefined;\r\n      const valueWei = toBigIntHex(tx?.value || \"0x0\");\r\n      return {\r\n        chainId: provider?.chainId ?? null,\r\n        preflight: {\r\n          tx,\r\n          valueWei: valueWei.toString(10),\r\n          valueEth: weiToEthDecimal18(valueWei),\r\n        }\r\n      };\r\n    }\r\n    if (methodLower === \"wallet_switchethereumchain\") {\r\n      const chainIdRequested = Array.isArray(params) ? params?.[0]?.chainId : undefined;\r\n      return {\r\n        chainId: provider?.chainId ?? null,\r\n        chainIdRequested: chainIdRequested ?? null,\r\n      };\r\n    }\r\n    return { chainId: provider?.chainId ?? null };\r\n  } catch {\r\n    return { chainId: provider?.chainId ?? null };\r\n  }\r\n}\r\n\r\nfunction toChainIdHex(chainId: string | number | null | undefined): string | null {\r\n  if (chainId == null || chainId === \"\") return null;\r\n  const s = String(chainId).trim();\r\n  if (s.toLowerCase().startsWith(\"0x\")) return s;\r\n  const n = parseInt(s, 10);\r\n  if (!Number.isFinite(n) || n < 0) return null;\r\n  return \"0x\" + n.toString(16);\r\n}\r\n\r\nconst CHAIN_ID_FALLBACK_MS = 800;\r\n/** Resolve chainIdHex from provider; if empty, fetch via eth_chainId (with timeout). */\r\nasync function resolveChainIdHex(provider: any, rawRequest: (args: any) => Promise<any>): Promise<string | null> {\r\n  const fromProvider = toChainIdHex(provider?.chainId ?? null);\r\n  if (fromProvider && fromProvider !== \"0x0\") return fromProvider;\r\n  try {\r\n    const result = await Promise.race([\r\n      rawRequest({ method: \"eth_chainId\", params: [], [SG_BYPASS]: true }),\r\n      new Promise<never>((_, rej) => setTimeout(() => rej(new Error(\"timeout\")), CHAIN_ID_FALLBACK_MS)),\r\n    ]);\r\n    return toChainIdHex(result);\r\n  } catch {\r\n    return fromProvider;\r\n  }\r\n}\r\n\r\ntype EIP6963Provider = { uuid: string; name: string; icon?: string; rdns?: string; providerRef: any };\r\n\r\nconst SG_ANNOUNCED_PROVIDERS: EIP6963Provider[] = [];\r\nlet SG_ACTIVE_PROVIDER: any = null;\r\n\r\nfunction selectActiveProvider(): any {\r\n  const w = typeof window !== \"undefined\" ? (window as any) : null;\r\n  const eth = w?.ethereum;\r\n  if (eth) return eth;\r\n  const first = SG_ANNOUNCED_PROVIDERS[0]?.providerRef;\r\n  return first || null;\r\n}\r\n\r\nfunction applyActiveProvider() {\r\n  const next = selectActiveProvider();\r\n  if (next && next !== SG_ACTIVE_PROVIDER) {\r\n    SG_ACTIVE_PROVIDER = next;\r\n    wrapProvider(next, undefined, \"window.ethereum\");\r\n  }\r\n}\r\n\r\nfunction wrapProvider(provider: any, providerTag?: string, providerSource?: \"window.ethereum\" | \"ethereum.providers[i]\" | \"eip6963\", providerIndex?: number | string, eip6963DisplayName?: string) {\r\n  if (!provider || typeof provider.request !== \"function\") return;\r\n  if ((provider.request as any).__sg_wrapped) return;\r\n\r\n  const eth = provider;\r\n  const rawRequest = eth.request?.bind(eth);\r\n  const rawSend = eth.send?.bind(eth);\r\n  const rawSendAsync = eth.sendAsync?.bind(eth);\r\n\r\n  if (typeof rawRequest !== \"function\") return;\r\n\r\n  async function sgRequest(args: any) {\r\n    // bypass para reexecu\u00E7\u00E3o\r\n    if (args && args[SG_BYPASS]) {\r\n      const clean = { ...args };\r\n      delete clean[SG_BYPASS];\r\n      return rawRequest(clean);\r\n    }\r\n\r\n    const method = String(args?.method || \"\").toLowerCase();\r\n    const params = args?.params;\r\n\r\n    // Non-blocking telemetry for flow tracking (content script)\r\n    postMessageSG(\"SG_RPC\", { method, params });\r\n\r\n    // For send tx: estimate fees BEFORE opening overlay (read-only, no wallet popup)\r\n    let txCostPreview: any = undefined;\r\n    if ((method === \"eth_sendtransaction\" || method === \"wallet_sendtransaction\") && Array.isArray(params) && params[0] && typeof params[0] === \"object\") {\r\n      const tx = params[0];\r\n      const providerRequest = (a: any) => rawRequest(a);\r\n      const fee = await estimateFee(providerRequest, tx);\r\n      const valueWei = BigInt(typeof tx?.value === \"string\" ? tx.value : (tx?.value ?? \"0x0\"));\r\n      txCostPreview = {\r\n        valueWei: valueWei.toString(10),\r\n        feeEstimated: fee.ok,\r\n      };\r\n      if (fee.ok && fee.feeLikelyWei !== undefined && fee.feeMaxWei !== undefined) {\r\n        if (fee.gasLimit) txCostPreview.gasLimitWei = fee.gasLimit.toString(10);\r\n        txCostPreview.feeLikelyWei = fee.feeLikelyWei.toString(10);\r\n        txCostPreview.feeMaxWei = fee.feeMaxWei.toString(10);\r\n        txCostPreview.totalLikelyWei = (valueWei + fee.feeLikelyWei).toString(10);\r\n        txCostPreview.totalMaxWei = (valueWei + fee.feeMaxWei).toString(10);\r\n      } else {\r\n        txCostPreview.feeReasonKey = \"fee_unknown_wallet_will_estimate\";\r\n      }\r\n    }\r\n\r\n    const sensitive = [\r\n      \"eth_requestaccounts\",\r\n      \"wallet_requestpermissions\",\r\n      \"wallet_getpermissions\",\r\n      \"personal_sign\",\r\n      \"eth_sign\",\r\n      \"eth_signtypeddata_v4\",\r\n      \"eth_signtypeddata_v3\",\r\n      \"eth_signtypeddata\",\r\n      \"eth_signtransaction\",\r\n      \"eth_sendtransaction\",\r\n      \"wallet_sendtransaction\",\r\n      \"wallet_switchethereumchain\",\r\n      \"wallet_addethereumchain\",\r\n      \"wallet_watchasset\"\r\n    ].includes(method);\r\n\r\n    if (!sensitive) return rawRequest(args);\r\n\r\n    const requestId = sgId();\r\n\r\n    return new Promise((resolve, reject) => {\r\n      pendingCalls.set(requestId, {\r\n        resolve,\r\n        reject,\r\n        runOriginal: () => rawRequest({ ...(args || {}), [SG_BYPASS]: true }),\r\n        createdAt: Date.now(),\r\n        method,\r\n        uiShown: false\r\n      });\r\n\r\n      const walletMeta = detectWalletFromProvider(provider);\r\n      const walletInfo = detectEvmWallet(provider, eip6963DisplayName);\r\n      const walletBrand = detectWalletBrand(provider, eip6963DisplayName);\r\n      const providerKey = [providerSource || \"window.ethereum\", walletMeta.id, providerIndex ?? \"\"].filter(Boolean).join(\":\");\r\n      (async () => {\r\n        const chainIdHex = await resolveChainIdHex(provider, (a) => rawRequest(a));\r\n        const meta = buildRpcMeta(method, params, provider);\r\n        if (chainIdHex != null) (meta as any).chainId = chainIdHex;\r\n        try {\r\n          window.postMessage({\r\n            source: \"signguard-inpage\",\r\n            type: \"SG_REQUEST\",\r\n            requestId,\r\n            payload: {\r\n              id: requestId,\r\n              url: location.href,\r\n              origin: location.origin,\r\n              host: location.host,\r\n              method,\r\n              params: Array.isArray(params) ? params : (params ?? null),\r\n              chainId: chainIdHex ?? provider?.chainId ?? null,\r\n              chainIdHex: chainIdHex ?? toChainIdHex(provider?.chainId ?? null),\r\n              wallet: { ...walletInfo, id: walletMeta.id, walletBrand, walletName: walletInfo.walletName || walletBrand },\r\n              providerKey,\r\n              providerSource: providerSource || \"window.ethereum\",\r\n              request: { method, params: Array.isArray(params) ? params : undefined },\r\n              providerTag,\r\n              providerHint: { kind: walletInfo.name, name: walletInfo.name },\r\n              meta,\r\n              txCostPreview,\r\n            }\r\n          }, \"*\");\r\n        } catch {}\r\n      })();\r\n    });\r\n  }\r\n\r\n  (sgRequest as any).__sg_wrapped = true;\r\n  eth.request = sgRequest as any;\r\n\r\n  // Wrap send (method, params) or send(payload)\r\n  if (typeof rawSend === \"function\") {\r\n    eth.send = function(methodOrPayload: any, paramsOrCb: any) {\r\n      const payload =\r\n        typeof methodOrPayload === \"string\"\r\n          ? { method: methodOrPayload, params: Array.isArray(paramsOrCb) ? paramsOrCb : [paramsOrCb] }\r\n          : methodOrPayload;\r\n\r\n      const method = String(payload?.method || \"\").toLowerCase().trim();\r\n      const params = payload?.params;\r\n      postMessageSG(\"SG_RPC\", { method, params });\r\n\r\n      const sensitive = [\r\n        \"eth_requestaccounts\",\r\n        \"wallet_requestpermissions\",\r\n        \"wallet_getpermissions\",\r\n        \"personal_sign\",\r\n        \"eth_sign\",\r\n        \"eth_signtypeddata_v4\",\r\n        \"eth_signtypeddata_v3\",\r\n        \"eth_signtypeddata\",\r\n        \"eth_signtransaction\",\r\n        \"eth_sendtransaction\",\r\n        \"wallet_sendtransaction\",\r\n        \"wallet_switchethereumchain\",\r\n        \"wallet_addethereumchain\",\r\n        \"wallet_watchasset\"\r\n      ].includes(method);\r\n\r\n      if (!sensitive) return rawSend(methodOrPayload, paramsOrCb);\r\n\r\n      const requestId = sgId();\r\n      (async () => {\r\n        let txCostPreview: any = undefined;\r\n        if ((method === \"eth_sendtransaction\" || method === \"wallet_sendtransaction\") && Array.isArray(params) && params[0] && typeof params[0] === \"object\") {\r\n          const tx = params[0];\r\n          const fee = await estimateFee((a: any) => rawRequest(a), tx);\r\n          const valueWei = BigInt(typeof tx?.value === \"string\" ? tx.value : (tx?.value ?? \"0x0\"));\r\n          txCostPreview = { valueWei: valueWei.toString(10), feeEstimated: fee.ok };\r\n          if (fee.ok && fee.feeLikelyWei !== undefined && fee.feeMaxWei !== undefined) {\r\n            if (fee.gasLimit) txCostPreview.gasLimitWei = fee.gasLimit.toString(10);\r\n            txCostPreview.feeLikelyWei = fee.feeLikelyWei.toString(10);\r\n            txCostPreview.feeMaxWei = fee.feeMaxWei.toString(10);\r\n            txCostPreview.totalLikelyWei = (valueWei + fee.feeLikelyWei).toString(10);\r\n            txCostPreview.totalMaxWei = (valueWei + fee.feeMaxWei).toString(10);\r\n          } else {\r\n            txCostPreview.feeReasonKey = \"fee_unknown_wallet_will_estimate\";\r\n          }\r\n        }\r\n        const walletMetaInner = detectWalletFromProvider(provider);\r\n        const walletInfo = detectEvmWallet(provider, eip6963DisplayName);\r\n        const walletBrandInner = detectWalletBrand(provider, eip6963DisplayName);\r\n        const providerKey = [providerSource || \"window.ethereum\", walletMetaInner.id, providerIndex ?? \"\"].filter(Boolean).join(\":\");\r\n        const chainIdHex = await resolveChainIdHex(provider, (a) => rawRequest(a));\r\n        const meta = buildRpcMeta(method, params, provider);\r\n        if (chainIdHex != null) (meta as any).chainId = chainIdHex;\r\n        try {\r\n          window.postMessage({\r\n            source: \"signguard-inpage\",\r\n            type: \"SG_REQUEST\",\r\n            requestId,\r\n            payload: {\r\n              id: requestId,\r\n              url: location.href,\r\n              origin: location.origin,\r\n              host: location.host,\r\n              method,\r\n              params: Array.isArray(params) ? params : (params ?? null),\r\n              chainId: chainIdHex ?? provider?.chainId ?? null,\r\n              chainIdHex: chainIdHex ?? toChainIdHex(provider?.chainId ?? null),\r\n              wallet: { ...walletInfo, id: walletMetaInner.id, walletBrand: walletBrandInner, walletName: walletInfo.walletName || walletBrandInner },\r\n              providerKey,\r\n              providerSource: providerSource || \"window.ethereum\",\r\n              request: { method, params: Array.isArray(params) ? params : undefined },\r\n              providerTag,\r\n              providerHint: { kind: walletInfo.name, name: walletInfo.name },\r\n              meta,\r\n              txCostPreview,\r\n            }\r\n          }, \"*\");\r\n        } catch {}\r\n      })();\r\n      return new Promise((resolve, reject) => {\r\n        pendingCalls.set(requestId, {\r\n          resolve,\r\n          reject,\r\n          runOriginal: () => Promise.resolve(rawSend(methodOrPayload, paramsOrCb)),\r\n          createdAt: Date.now(),\r\n          method,\r\n          uiShown: false,\r\n        });\r\n      });\r\n    } as any;\r\n  }\r\n\r\n  // Wrap sendAsync(payload, cb)\r\n  if (typeof rawSendAsync === \"function\") {\r\n    eth.sendAsync = function(payload: any, cb: any) {\r\n      const method = String(payload?.method || \"\").toLowerCase().trim();\r\n      const params = payload?.params;\r\n      postMessageSG(\"SG_RPC\", { method, params });\r\n\r\n      const sensitive = [\r\n        \"eth_requestaccounts\",\r\n        \"wallet_requestpermissions\",\r\n        \"wallet_getpermissions\",\r\n        \"personal_sign\",\r\n        \"eth_sign\",\r\n        \"eth_signtypeddata_v4\",\r\n        \"eth_signtypeddata_v3\",\r\n        \"eth_signtypeddata\",\r\n        \"eth_signtransaction\",\r\n        \"eth_sendtransaction\",\r\n        \"wallet_sendtransaction\",\r\n        \"wallet_switchethereumchain\",\r\n        \"wallet_addethereumchain\",\r\n        \"wallet_watchasset\"\r\n      ].includes(method);\r\n\r\n      if (!sensitive) return rawSendAsync(payload, cb);\r\n\r\n      const requestId = sgId();\r\n      const doneCb = (typeof cb === \"function\") ? cb : (() => {});\r\n\r\n      (async () => {\r\n        let txCostPreview: any = undefined;\r\n        if ((method === \"eth_sendtransaction\" || method === \"wallet_sendtransaction\") && Array.isArray(params) && params[0] && typeof params[0] === \"object\") {\r\n          const tx = params[0];\r\n          const fee = await estimateFee((a: any) => rawRequest(a), tx);\r\n          const valueWei = BigInt(typeof tx?.value === \"string\" ? tx.value : (tx?.value ?? \"0x0\"));\r\n          txCostPreview = { valueWei: valueWei.toString(10), feeEstimated: fee.ok };\r\n          if (fee.ok && fee.feeLikelyWei !== undefined && fee.feeMaxWei !== undefined) {\r\n            if (fee.gasLimit) txCostPreview.gasLimitWei = fee.gasLimit.toString(10);\r\n            txCostPreview.feeLikelyWei = fee.feeLikelyWei.toString(10);\r\n            txCostPreview.feeMaxWei = fee.feeMaxWei.toString(10);\r\n            txCostPreview.totalLikelyWei = (valueWei + fee.feeLikelyWei).toString(10);\r\n            txCostPreview.totalMaxWei = (valueWei + fee.feeMaxWei).toString(10);\r\n          } else {\r\n            txCostPreview.feeReasonKey = \"fee_unknown_wallet_will_estimate\";\r\n          }\r\n        }\r\n        const walletMetaAsync = detectWalletFromProvider(provider);\r\n        const walletInfo = detectEvmWallet(provider, eip6963DisplayName);\r\n        const walletBrandAsync = detectWalletBrand(provider, eip6963DisplayName);\r\n        const providerKey = [providerSource || \"window.ethereum\", walletMetaAsync.id, providerIndex ?? \"\"].filter(Boolean).join(\":\");\r\n        const chainIdHex = await resolveChainIdHex(provider, (a) => rawRequest(a));\r\n        const meta = buildRpcMeta(method, params, provider);\r\n        if (chainIdHex != null) (meta as any).chainId = chainIdHex;\r\n        try {\r\n          window.postMessage({\r\n            source: \"signguard-inpage\",\r\n            type: \"SG_REQUEST\",\r\n            requestId,\r\n            payload: {\r\n              id: requestId,\r\n              url: location.href,\r\n              origin: location.origin,\r\n              host: location.host,\r\n              method,\r\n              params: Array.isArray(params) ? params : (params ?? null),\r\n              chainId: chainIdHex ?? provider?.chainId ?? null,\r\n              chainIdHex: chainIdHex ?? toChainIdHex(provider?.chainId ?? null),\r\n              wallet: { ...walletInfo, id: walletMetaAsync.id, walletBrand: walletBrandAsync, walletName: walletInfo.walletName || walletBrandAsync },\r\n              providerKey,\r\n              providerSource: providerSource || \"window.ethereum\",\r\n              request: { method, params: Array.isArray(params) ? params : undefined },\r\n              providerTag,\r\n              providerHint: { kind: walletInfo.name, name: walletInfo.name },\r\n              meta,\r\n              txCostPreview,\r\n            }\r\n          }, \"*\");\r\n        } catch {}\r\n      })();\r\n      return new Promise((resolve, reject) => {\r\n        pendingCalls.set(requestId, {\r\n          resolve: (v) => { try { doneCb(null, v); } catch {} resolve(v); },\r\n          reject: (e) => { try { doneCb(e); } catch {} reject(e); },\r\n          runOriginal: () =>\r\n            new Promise((res, rej) => {\r\n              try {\r\n                rawSendAsync(payload, (err: any, resp: any) => {\r\n                  if (err) return rej(err);\r\n                  res(resp);\r\n                });\r\n              } catch (e) { rej(e); }\r\n            }),\r\n          createdAt: Date.now(),\r\n          method,\r\n          uiShown: false,\r\n        });\r\n      });\r\n    } as any;\r\n  }\r\n}\r\n\r\nfunction rejectEIP1193UserRejected(method: string) {\r\n  return { code: 4001, message: \"User rejected the request\", data: { method } };\r\n}\r\n\r\nfunction resumeDecisionInner(requestId: string, allow: boolean, errorMessage?: string) {\r\n  try {\r\n    const pending = pendingCalls.get(requestId);\r\n    if (!pending) return;\r\n\r\n    pendingCalls.delete(requestId);\r\n\r\n    if (!allow) {\r\n      const msg = typeof errorMessage === \"string\" && errorMessage.trim() ? errorMessage.trim() : \"User rejected the request\";\r\n      pending.reject({ code: 4001, message: msg, data: { method: pending.method } });\r\n      try {\r\n        window.postMessage({ source: \"signguard-inpage\", type: \"SG_DECISION_ACK\", requestId, allow: false }, \"*\");\r\n      } catch {}\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const promise = pending.runOriginal();\r\n      promise.then(pending.resolve).catch(pending.reject);\r\n      try {\r\n        window.postMessage({ source: \"signguard-inpage\", type: \"SG_DECISION_ACK\", requestId, allow: true }, \"*\");\r\n      } catch {}\r\n    } catch (e) {\r\n      pending.reject(e);\r\n      try {\r\n        window.postMessage({ source: \"signguard-inpage\", type: \"SG_DECISION_ACK\", requestId, allow: false }, \"*\");\r\n      } catch {}\r\n    }\r\n  } catch {}\r\n}\r\n\r\nfunction markUiShown(requestId: string) {\r\n  try {\r\n    const p = pendingCalls.get(requestId);\r\n    if (p) {\r\n      p.uiShown = true;\r\n      p.lastKeepaliveAt = Date.now();\r\n    }\r\n  } catch {}\r\n}\r\n\r\nfunction handleKeepalive(requestId: string) {\r\n  try {\r\n    const p = pendingCalls.get(requestId);\r\n    if (!p) return;\r\n    p.lastKeepaliveAt = Date.now();\r\n    if (!p.uiShown) p.uiShown = true; // keepalive implies overlay is active\r\n  } catch {}\r\n}\r\n\r\n// Content marks overlay shown (affects timeout: uiShown => reject on timeout, else fail-open)\r\nwindow.addEventListener(\"signguard:uiShown\", (ev: any) => {\r\n  try {\r\n    const detail = ev?.detail || {};\r\n    const requestId = String(detail.requestId || \"\");\r\n    if (!requestId) return;\r\n    markUiShown(requestId);\r\n  } catch {}\r\n}, true);\r\n\r\nwindow.addEventListener(\"message\", (ev) => {\r\n  try {\r\n    if (ev.source !== window) return;\r\n    const d = (ev as any)?.data;\r\n    if (!d || (d.source !== \"signguard\" && d.source !== \"signguard-content\")) return;\r\n    if (d.type === \"SG_UI_SHOWN\") markUiShown(String(d.requestId || \"\"));\r\n    if (d.type === \"SG_KEEPALIVE\") handleKeepalive(String(d.requestId || \"\"));\r\n  } catch {}\r\n});\r\n\r\n// CRITICAL: Click capture in MAIN world so resume runs in same user-activation stack (MetaMask opens 100%)\r\nwindow.addEventListener(\"click\", (ev: MouseEvent) => {\r\n  try {\r\n    const path = ev.composedPath && ev.composedPath();\r\n    if (!path || !Array.isArray(path) || path.length === 0) return;\r\n    let allow: boolean | null = null;\r\n    for (let i = 0; i < path.length; i++) {\r\n      const el = path[i] as Element | undefined;\r\n      if (!el || typeof el.getAttribute !== \"function\") continue;\r\n      const id = el.id;\r\n      if (id === \"sg-continue\" || id === \"sg-proceed\") { allow = true; break; }\r\n      if (id === \"sg-cancel\" || id === \"sg-close\") { allow = false; break; }\r\n    }\r\n    if (allow === null) return;\r\n    let overlayRoot: Element | null = null;\r\n    for (let i = 0; i < path.length; i++) {\r\n      const el = path[i] as Element | undefined;\r\n      if (el?.getAttribute?.(\"data-sg-overlay\") === \"1\") {\r\n        overlayRoot = el;\r\n        break;\r\n      }\r\n    }\r\n    if (!overlayRoot) return;\r\n    const requestId = overlayRoot.getAttribute(\"data-sg-request-id\") || \"\";\r\n    if (!requestId) return;\r\n    if (!pendingCalls.has(requestId)) return;\r\n    resumeDecisionInner(requestId, allow);\r\n    ev.preventDefault();\r\n    ev.stopImmediatePropagation();\r\n  } catch {}\r\n}, true);\r\n\r\n// Fallback path: CustomEvent from content (when click capture did not run)\r\nwindow.addEventListener(\"signguard:decision\", (ev: any) => {\r\n  try {\r\n    const detail = ev?.detail || {};\r\n    const requestId = String(detail.requestId || \"\");\r\n    const allow = !!detail.allow;\r\n    const errorMessage = detail.errorMessage;\r\n    resumeDecisionInner(requestId, allow, errorMessage);\r\n  } catch {}\r\n}, true);\r\n\r\n// Back-compat: previous event name\r\nwindow.addEventListener(\"sg:decision\", (ev: any) => {\r\n  try {\r\n    const detail = ev?.detail || {};\r\n    const requestId = String(detail.requestId || \"\");\r\n    const allow = !!detail.allow;\r\n    const errorMessage = detail.errorMessage;\r\n    resumeDecisionInner(requestId, allow, errorMessage);\r\n  } catch {}\r\n}, true);\r\n\r\n// Fallback: SG_DECISION via postMessage funnels into same logic\r\nwindow.addEventListener(\"message\", (ev) => {\r\n  try {\r\n    if (ev.source !== window) return;\r\n    const d = (ev as any)?.data;\r\n    if (!d || (d.source !== \"signguard\" && d.source !== \"signguard-content\")) return;\r\n    if (d.type !== \"SG_DECISION\") return;\r\n    void resumeDecisionInner(String(d.requestId || \"\"), !!d.allow, d.errorMessage);\r\n  } catch {}\r\n});\r\n\r\nsetInterval(() => {\r\n  const now = Date.now();\r\n  for (const [id, p] of pendingCalls.entries()) {\r\n    const base = p.lastKeepaliveAt ?? p.createdAt;\r\n    const timeout = p.uiShown ? TIMEOUT_MS_UI : TIMEOUT_MS_FAILOPEN;\r\n    const expiresAt = p.uiShown\r\n      ? Math.min(base + timeout, p.createdAt + KEEPALIVE_CAP_MS)\r\n      : base + timeout;\r\n    if (now > expiresAt) {\r\n      pendingCalls.delete(id);\r\n      if (p.uiShown) {\r\n        p.reject({ code: 4001, message: \"SignGuard: timeout\" });\r\n        try {\r\n          window.postMessage({ source: \"signguard-inpage\", type: \"SG_DECISION_ACK\", requestId: id, allow: false, expired: true }, \"*\");\r\n        } catch {}\r\n        continue;\r\n      }\r\n      armFailOpenOnNextGesture({\r\n        id,\r\n        runOriginal: p.runOriginal,\r\n        resolve: p.resolve,\r\n        reject: p.reject,\r\n        armedAt: Date.now(),\r\n      });\r\n    }\r\n  }\r\n}, 5000);\r\n\r\nfunction tryWrapAll() {\r\n  const providers = listEvmProviders();\r\n  const eth = (window as any)?.ethereum;\r\n  for (let i = 0; i < providers.length; i++) {\r\n    const p = providers[i];\r\n    const src: \"window.ethereum\" | \"ethereum.providers[i]\" = (i === 0 && p === eth) ? \"window.ethereum\" : \"ethereum.providers[i]\";\r\n    wrapProvider(p, i > 0 ? `provider-${i}` : undefined, src, String(i));\r\n  }\r\n  if (providers.length === 0) applyActiveProvider();\r\n  tryWrapSolana();\r\n}\r\n\r\nfunction tryWrapSolana() {\r\n  const sol: any = (window as any).solana;\r\n  if (!sol || (sol as any).__sg_wrapped) return;\r\n  const methods = [\"connect\", \"signMessage\", \"signTransaction\", \"signAllTransactions\", \"signAndSendTransaction\"];\r\n  for (const m of methods) {\r\n    if (typeof sol[m] !== \"function\") continue;\r\n    const raw = sol[m].bind(sol);\r\n    (sol as any)[m] = function (...args: any[]) {\r\n      const wallet = detectSolWallet(sol);\r\n      const requestId = sgId();\r\n      return new Promise((resolve, reject) => {\r\n        pendingCalls.set(requestId, {\r\n          resolve,\r\n          reject,\r\n          runOriginal: () => Promise.resolve(raw(...args)),\r\n          createdAt: Date.now(),\r\n          method: `solana:${m}`,\r\n          uiShown: false,\r\n        });\r\n        try {\r\n          window.postMessage({\r\n            source: \"signguard-inpage\",\r\n            type: \"SG_REQUEST\",\r\n            requestId,\r\n            payload: {\r\n              id: requestId,\r\n              url: location.href,\r\n              origin: location.origin,\r\n              host: location.host,\r\n              method: `solana:${m}`,\r\n              params: args?.length ? [{ method: m, argsCount: args.length }] : null,\r\n              wallet,\r\n              request: { method: `solana:${m}`, params: args },\r\n              meta: { chainId: null },\r\n            }\r\n          }, \"*\");\r\n        } catch {}\r\n      });\r\n    };\r\n  }\r\n  (sol as any).__sg_wrapped = true;\r\n}\r\n\r\nfunction startWrapRetry() {\r\n  window.addEventListener(\"ethereum#initialized\", () => tryWrapAll(), { once: false } as any);\r\n\r\n  window.addEventListener(\"eip6963:announceProvider\", (event: any) => {\r\n    try {\r\n      const info = event?.detail?.info;\r\n      const provider = event?.detail?.provider;\r\n      if (info && provider) {\r\n        const existing = SG_ANNOUNCED_PROVIDERS.find((p) => p.uuid === info.uuid);\r\n        if (!existing) {\r\n          SG_ANNOUNCED_PROVIDERS.push({\r\n            uuid: info.uuid || \"\",\r\n            name: info.name || \"Unknown\",\r\n            icon: info.icon,\r\n            rdns: info.rdns,\r\n            providerRef: provider,\r\n          });\r\n          wrapProvider(provider, info.rdns || info.name, \"eip6963\", info.uuid, info.name);\r\n        }\r\n        applyActiveProvider();\r\n      }\r\n    } catch {}\r\n  });\r\n  try { window.dispatchEvent(new Event(\"eip6963:requestProvider\")); } catch {}\r\n\r\n  const started = Date.now();\r\n  const interval = setInterval(() => {\r\n    tryWrapAll();\r\n    if (Date.now() - started > 10_000) clearInterval(interval);\r\n  }, 50);\r\n\r\n  try {\r\n    const mo = new MutationObserver(() => tryWrapAll());\r\n    mo.observe(document.documentElement, { childList: true, subtree: true });\r\n    setTimeout(() => mo.disconnect(), 10_000);\r\n  } catch {}\r\n}\r\n\r\n// REWRAP guard: window.ethereum and window.solana can change after load\r\nfunction startProviderGuardRewrap() {\r\n  let lastEth: any = null;\r\n  let lastReqFn: any = null;\r\n  let lastSolana: any = null;\r\n  let tries = 0;\r\n  const maxTries = 10;\r\n  const timer = setInterval(() => {\r\n    tries++;\r\n    try {\r\n      const eth: any = (window as any).ethereum;\r\n      const reqFn = eth?.request;\r\n      const sol: any = (window as any).solana;\r\n\r\n      const ethChanged = !!eth && eth !== lastEth;\r\n      const reqChanged = !!eth && typeof reqFn === \"function\" && reqFn !== lastReqFn;\r\n      const notWrapped = !!eth && typeof reqFn === \"function\" && !(reqFn as any).__sg_wrapped;\r\n      const solChanged = !!sol && sol !== lastSolana;\r\n      const solNotWrapped = !!sol && !(sol as any).__sg_wrapped;\r\n\r\n      if (ethChanged || reqChanged || notWrapped || solChanged || solNotWrapped) {\r\n        tryWrapAll();\r\n        lastEth = eth || null;\r\n        lastReqFn = eth?.request || null;\r\n        lastSolana = sol || null;\r\n      }\r\n    } catch {}\r\n\r\n    if (tries >= maxTries) {\r\n      try { clearInterval(timer); } catch {}\r\n    }\r\n  }, 500);\r\n}\r\n\r\n// RPC bridge: readonly eth_call / eth_chainId for asset lookup\r\nconst ALLOWED_RPC_METHODS = new Set([\"eth_call\", \"eth_chainid\", \"eth_getCode\"]);\r\nwindow.addEventListener(\"message\", (ev: MessageEvent) => {\r\n  try {\r\n    if (ev.source !== window) return;\r\n    const d = (ev as any)?.data;\r\n    if (!d || d.source !== \"signguard-content\" || d.type !== \"SG_RPC_CALL_REQUEST\") return;\r\n    const { id, method, params } = d;\r\n    const methodNorm = String(method || \"\").toLowerCase();\r\n    if (!ALLOWED_RPC_METHODS.has(methodNorm)) {\r\n      window.postMessage({ source: \"signguard\", type: \"SG_RPC_CALL_RESPONSE\", id, error: \"method_not_allowed\" }, \"*\");\r\n      return;\r\n    }\r\n    const eth = (window as any).ethereum || SG_ACTIVE_PROVIDER;\r\n    if (!eth?.request) {\r\n      window.postMessage({ source: \"signguard\", type: \"SG_RPC_CALL_RESPONSE\", id, error: \"no_provider\" }, \"*\");\r\n      return;\r\n    }\r\n    Promise.resolve(eth.request({ method: methodNorm, params: params || [] }))\r\n      .then((result: any) => window.postMessage({ source: \"signguard\", type: \"SG_RPC_CALL_RESPONSE\", id, result }, \"*\"))\r\n      .catch((err: any) => window.postMessage({ source: \"signguard\", type: \"SG_RPC_CALL_RESPONSE\", id, error: String(err?.message || err) }, \"*\"));\r\n  } catch {}\r\n});\r\n\r\n/** Market intelligence: detect which wallets are present and report to telemetry. */\r\nfunction reportWalletsDetected() {\r\n  try {\r\n    const w = typeof window !== \"undefined\" ? (window as any) : null;\r\n    if (!w) return;\r\n    const names: string[] = [];\r\n    if (w.ethereum) {\r\n      if (w.ethereum.isMetaMask === true) names.push(\"MetaMask\");\r\n      if (w.ethereum.isRabby === true) names.push(\"Rabby\");\r\n      if (w.ethereum.isCoinbaseWallet === true) names.push(\"Coinbase Wallet\");\r\n      if (w.ethereum.isTrust === true || w.ethereum.isTrustWallet === true) names.push(\"Trust Wallet\");\r\n      if (w.ethereum.isOkxWallet === true || w.ethereum.isOKExWallet === true) names.push(\"OKX Wallet\");\r\n      if (w.ethereum.isBraveWallet === true) names.push(\"Brave Wallet\");\r\n      if (w.ethereum.isRainbow === true) names.push(\"Rainbow\");\r\n      if (w.ethereum.isPhantom === true) names.push(\"Phantom\");\r\n      if (w.ethereum.isBitget === true || w.ethereum.isBitKeep === true) names.push(\"Bitget\");\r\n      if (w.ethereum.isBinance === true || w.ethereum.isBinanceWallet === true) names.push(\"Binance Web3\");\r\n    }\r\n    if (w.phantom?.solana) names.push(\"Phantom\");\r\n    if (w.coinbaseWalletExtension) names.push(\"Coinbase Wallet\");\r\n    const unique = [...new Set(names)];\r\n    if (unique.length > 0) {\r\n      window.postMessage(\r\n        { __SIGNGUARD__: true, type: \"TELEMETRY_WALLETS_DETECTED\", data: { wallets: unique }, href: location.href, origin: location.origin, ts: Date.now() },\r\n        \"*\"\r\n      );\r\n    }\r\n  } catch {\r\n    // must not break extension\r\n  }\r\n}\r\n\r\n// document_start\r\ntryWrapAll();\r\nstartWrapRetry();\r\nstartProviderGuardRewrap();\r\nsetTimeout(reportWalletsDetected, 500);\r\nsetTimeout(reportWalletsDetected, 3000);\r\n\r\n"],
  "mappings": "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",
  "names": []
}
